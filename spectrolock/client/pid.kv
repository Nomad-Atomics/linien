<RootElement>:
    BoxLayout:
        Button:
            id: button_go_left
            text: '<'
            size_hint: (.1, None)
            pos_hint: {'center_y': 0.5}
            on_press: root.change_center(False)

        Graph:
            id: graph
            x_ticks_minor: 5
            x_ticks_major: 8192
            y_ticks_major: 1000
            y_grid_label: True
            x_grid_label: False
            padding: 5
            x_grid: True
            y_grid: True
            xmin: -0
            xmax: 100
            ymin: -1
            ymax: 1

            on_touch_down: root.graph_mouse_down(*args)
            on_touch_up: root.graph_mouse_up(*args)
            on_touch_move: root.graph_mouse_move(*args)

        Button:
            id: button_go_right
            text: '>'
            size_hint: (.1, None)
            pos_hint: {'center_y': 0.5}
            on_press: root.change_center(True)

        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            size_hint: (0.25, 1)
            pos_hint: {'x': 0.75, 'y': 0}
            padding: (10, 10)

            BoxLayout:
                orientation: 'vertical'
                size_hint: (1, None)

                Label:
                    text: 'Modulation frequency'

                BoxLayout:
                    Button:
                        text: '-'
                        on_press: root.change_frequency(False)
                    Label:
                        id: frequency_display
                    Button:
                        text: '+'
                        on_press: root.change_frequency(True)

            BoxLayout:
                orientation: 'vertical'
                size_hint: (1, None)

                Label:
                    text: 'Modulation amplitude'

                BoxLayout:
                    Button:
                        text: '-'
                        on_press: root.change_amplitude(False)
                    Label:
                        id: amplitude_display
                    Button:
                        text: '+'
                        on_press: root.change_amplitude(True)

            BoxLayout:
                orientation: 'vertical'
                size_hint: (1, None)

                Label:
                    text: 'Demodulation phase'

                BoxLayout:
                    Button:
                        text: '-'
                        on_press: root.change_phase(False)
                    Label:
                        id: phase_display
                    Button:
                        text: '+'
                        on_press: root.change_phase(True)

            Button:
                size_hint: (1, None)
                text: 'Shutdown'
                on_press: root.shutdown()

            BoxLayout:
                orientation: 'vertical'
                size_hint: (1, None)

                Label:
                    text: 'P and I'

                BoxLayout:
                    TextInput:
                        id: k
                        multiline: False
                        on_text_validate: root.set_k(*args)
                    TextInput:
                        id: f
                        multiline: False
                        on_text_validate: root.set_f(*args)

            TabbedPanel:
                id: mode_tab
                do_default_tab: False

                TabbedPanelItem:
                    id: automatic_mode
                    text: 'Automatic'
                    on_release: root.change_tab(True)

                    BoxLayout:
                        id: lock_status
                        orientation: 'vertical'
                        padding: (20, 20)

                TabbedPanelItem:
                    id: manual_mode
                    text: 'Manual'
                    on_release: root.change_tab(False)

                    BoxLayout:
                        padding: (10, 10)
                        orientation: 'vertical'

                        BoxLayout:
                            size_hint: (1, None)
                            ToggleButton:
                                id: scan_button
                                text: 'Scan'
                                group: 'task'
                                state: 'down'
                                on_press: root.control.start_ramp()

                            ToggleButton:
                                id: lock_button
                                text: 'Lock'
                                group: 'task'
                                on_press: root.control.start_lock()

                        Label:
                            size_hint: (1, None)
                            text: 'Signal Offset'

                        NumberInput:
                            id: offset_display
                            size_hint: (1, None)
                            on_text_validate: root.change_offset(*args)
                            multiline: False

                        Label:
                            size_hint: (1, 100)

            #Button:
            #    text: 'export'
            #    on_press: root.export_data()

    BoxLayout:
        id: zoom_container
        size_hint: (None, None)
        # position is set in gui as a reaction to lock status change
        size: (300, 25)

        Label:
            id: scan_range_display
        Button:
            text: '+'
            on_press: root.change_range(True)
        Button:
            text: '-'
            on_press: root.change_range(False)
        Button:
            text: 'reset'
            on_press: root.reset_range()
